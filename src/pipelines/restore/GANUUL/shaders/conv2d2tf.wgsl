// Layer: Anime4K-v4.1-Restore-GAN-(UUL)-Conv-4x3x3x24
// Name: conv2d2tf
// Inputs: ['conv2d_1_tf', 'conv2d_1_tf1', 'conv2d_1_tf2']
// Output: conv2d_2_tf
@group(0) @binding(0) var conv2d_1_tf_tex: texture_2d<f32>;
@group(0) @binding(1) var conv2d_1_tf1_tex: texture_2d<f32>;
@group(0) @binding(2) var conv2d_1_tf2_tex: texture_2d<f32>;
@group(0) @binding(3) var conv2d_2_tf_tex: texture_storage_2d<rgba16float, write>;
fn max4(vector: vec4f, value: f32) -> vec4f {
  return max(vector, vec4f(value));
}

fn go_0(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_1(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_2(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_3(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_4(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_5(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}


@compute
@workgroup_size(8, 8)
fn computeMain(@builtin(global_invocation_id) pixel: vec3u) {
  // OOB check
  let dim_out: vec2u = textureDimensions(conv2d_2_tf_tex);
  if (pixel.x >= dim_out.x || pixel.y >= dim_out.y) {
    return;
  }
  
  var result: vec4f = vec4f(0.0);
  result += mat4x4<f32>(0.04035504, 0.24661791, 0.16603021, -0.14574075, 0.016028887, 0.23053943, -0.01308933, -0.13217592, 0.14422223, 0.046401497, 0.31343204, -0.018826274, -0.13334458, -0.13250591, -0.19680983, 0.023520457) * go_0(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.18644534, 0.16142415, -0.10263999, -0.1785358, 0.1524165, -0.096029095, 0.044161733, 0.040999066, -0.024374438, 0.007344798, -0.011679108, -0.01964757, -0.17767182, 0.05571244, 0.027234446, 0.043839652) * go_0(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.04718799, -0.044331063, 0.13524447, -0.067815036, 0.11796701, 0.19663425, -0.10252262, -0.10110826, -0.12611324, 0.10640568, 0.19015492, -0.05703842, -0.2498106, 0.06150599, -0.16034353, 0.023444213) * go_0(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.27109948, -0.2330959, -0.24654478, -0.13645583, -0.30987036, -0.09328997, -0.047055356, -0.008120827, 0.12002382, -0.052843675, -0.024162116, -0.07013582, -0.21204828, 0.24816163, -0.048868638, -0.020213706) * go_0(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.36924088, 0.19141299, -0.0596671, 0.05201207, 0.042457893, -0.14713997, 0.06199918, 0.3931451, 0.08613402, -0.07767505, -0.22640567, 0.139795, -0.080966346, 0.24099334, -0.1484309, -0.18542144) * go_0(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.24846043, 0.04992665, 0.01550666, -0.07386302, -0.033128314, -0.109518744, -0.0131575465, 0.093934394, -0.10481641, -0.21640164, -0.042719785, -0.119751304, -0.14406851, -0.09887475, 0.0551473, 0.1988483) * go_0(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.005014479, -0.028502205, 0.056643553, 0.22005746, -0.109462686, -0.063529275, 0.068870015, -0.09086573, -0.20329769, 0.062993504, 0.012298516, -0.09511996, -0.070928045, -0.084570564, 0.030517094, 0.0666073) * go_0(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.23140994, -0.14801921, 0.10917109, 0.04020163, -0.124175526, -9.252112e-05, -0.10079859, -0.08308403, -0.15703133, 0.12351128, -0.062012766, 0.012078454, 0.017588409, -0.19278778, -0.011159341, -0.019345049) * go_0(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.13358298, -0.13400944, -0.04192524, 0.05254761, 0.090020865, 0.204023, -0.017487295, -0.103140116, -0.0635867, -0.04658558, 0.017988916, -0.095914505, 0.0028000565, 0.1542994, 0.02950823, 0.04616086) * go_0(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.05432518, -0.0111842025, -0.0062327827, -0.033791576, 0.09963238, -0.007702412, 0.107363395, -0.0002620659, -0.03530006, -0.17219695, 0.20868061, 0.097935446, -0.08475756, -0.039234992, -0.13846119, 0.062036924) * go_1(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.01616353, -0.12863919, 0.15521172, 0.097896874, 0.033820298, -0.05146636, 0.02785997, -0.09073786, -0.09372875, 0.06929703, -0.0107195005, 0.018365687, 0.0868831, 0.0070242505, -0.040582743, -0.07992907) * go_1(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.07650785, -0.072560616, 0.01351836, 0.07111899, -0.022031955, -0.010699844, -0.061331112, -0.18606193, 0.016390545, -0.013820923, 0.024161916, 0.05317417, -0.023394106, -0.12722068, -0.2521299, -0.0032620258) * go_1(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.09762331, 0.062247284, -0.07981863, 0.048026998, 0.052663904, 0.1488446, -0.0859117, 0.081166595, 0.06321994, 0.10102734, -0.08696909, 0.018006293, 0.10951873, 0.11635254, -0.073152475, 0.021577666) * go_1(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.13631535, 0.09643497, 0.06995556, -0.012752857, 0.16278613, 0.015534217, 0.108511776, 0.14669219, 0.008778259, 0.16631478, 0.060034137, -0.16236681, -0.05978258, 0.062230766, -0.33324954, -0.02387315) * go_1(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.26835418, -0.05078421, -0.038090322, -0.01212539, 0.0064360583, -0.09849181, 0.055596586, -0.049771946, -0.060680225, 0.11777931, 0.0092843445, -0.0003092349, -0.054714512, -0.036983784, 0.080890685, 0.01171634) * go_1(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.095172614, -0.00536103, 0.024565516, 0.15711878, -0.054901525, -0.11539277, -0.0537201, 0.035690263, -0.012858618, 0.0074576396, -0.09323002, 0.0212987, 0.057625733, -0.028343642, 0.09287552, 0.17583063) * go_1(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.039239723, 0.08689648, -0.09737909, -0.030164383, -0.16954574, -0.19429989, -0.008026096, -0.009319319, 0.050411783, 0.003132383, -0.032023713, -0.044580568, 0.05639381, 0.26383185, -0.11680319, 0.20925997) * go_1(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.1350493, 0.066753425, -0.07848042, -0.07173146, -0.09169151, -0.02280378, 0.014779426, 0.08916784, -0.09334288, -0.081331305, -0.06598685, -0.023294056, 0.13236979, 0.32240087, -0.05203544, -0.035413966) * go_1(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.026199203, 0.0204687, -0.070584424, -0.021580774, 0.118979365, 0.0988867, -0.14607596, 0.13370356, -0.0843717, 0.08955508, -0.035913162, -0.039743375, 0.03797019, -0.057666034, 0.09423923, 0.07839171) * go_2(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.2348814, 0.0213994, 0.07450211, -0.003232845, 0.09450214, 0.014603701, 0.025057215, 0.048732072, -0.20320013, 0.02525451, -0.26879773, -0.21511178, 0.08866451, -0.046766516, -0.13612792, -0.09785279) * go_2(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.12481913, -0.12849878, -0.016158326, 0.025934998, 0.022762675, -0.011452937, -0.08533328, 0.06363569, 0.14518197, 0.23348686, 0.095732406, -0.19029738, 0.05512797, 0.02524934, 0.05958946, 0.06717244) * go_2(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.061521348, -0.16622357, -0.08235146, -0.06429693, 0.03720797, 0.20682053, -0.08594098, 0.07171474, 0.0014226728, -0.07034602, -0.09734637, 0.03378296, 0.16466366, -0.10899766, -0.003239979, -0.015122078) * go_2(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.16695042, -0.1315729, 0.09122205, 0.07520023, -0.09821882, 0.035185304, -0.06842167, -0.011763841, -0.09345794, 0.15259263, -0.39355028, -0.3891075, 0.18299462, 0.06755557, -0.027738906, 0.013310929) * go_2(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.033140916, -0.027768493, -0.02067478, -0.06325463, -0.09894021, -0.20934165, -0.015428146, 0.12136887, 0.046120573, -0.071947254, 0.028421128, 0.06357571, 0.13145766, 0.04536773, 0.044150203, -0.10509899) * go_2(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.10988508, 0.112615995, 0.1751226, 0.02660734, 0.08398276, 0.12926741, 0.2084611, 0.15119243, 0.028835213, -0.039361596, 0.0034648806, 0.029079277, -0.00217732, 0.06629454, -0.07294264, 0.023904502) * go_2(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.013733941, -0.19174497, 0.106097385, 0.13108249, -0.02342723, -0.314217, 0.070849575, 0.0720347, -0.12744898, -0.065455206, -0.15339097, 0.022219827, -0.016159452, 0.010578856, 0.08105944, -0.05987952) * go_2(pixel.xy, 1, 0);
  result += mat4x4<f32>(0.23217027, 0.05277337, 0.071452655, -0.10689918, -0.031163886, 0.1281398, -0.046946436, -0.027713988, -0.03565471, 0.08120484, -0.04330698, 0.07295522, 0.1321532, -0.03170989, 0.016022692, 0.121839166) * go_2(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.00410671, -0.04678445, 0.18113981, 0.05987472, 0.21671912, -0.34416708, 0.2037898, 0.15413988, -0.115338616, -0.06392024, 0.13700303, -0.033065956, -0.018238343, 0.1134282, 0.1275314, -0.019762916) * go_3(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.11894926, -0.029414194, 0.18244646, 0.217531, 0.07504621, 0.024808811, 0.23533674, -0.022842843, 0.05035676, -0.011317847, 0.7755237, 0.14858165, -8.2921815e-08, -0.04540463, 0.11160265, -0.0009788543) * go_3(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.14826688, -0.097891875, -0.13205692, -0.059139438, -0.13794315, -0.2652887, -0.11130958, -0.05137257, -0.1176455, -0.1548706, -0.10306716, 0.21789181, -0.009209018, 0.011220653, 0.01963476, 0.012935865) * go_3(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.11714751, 0.15236345, 0.13536146, 0.044848517, 0.34835097, 0.13658829, 0.36627477, -0.27132225, -0.3091611, 0.20383716, 0.30317453, 0.08233188, -0.07287086, -0.048854213, 0.14926453, 0.033089206) * go_3(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.06970943, -0.11879602, -0.04682354, 0.06618747, 0.22552045, -0.13497396, 0.08345175, -0.255251, 0.15757652, 0.069464825, 0.37833855, -0.2546535, -0.16741769, -0.0860299, -0.0130390655, 0.09818734) * go_3(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.07983536, 0.06403843, -0.07103762, -0.08339309, -0.055773012, 0.009426009, -0.12089462, -0.16594686, -0.11570191, -0.15629323, 0.054537755, 0.1888691, -0.13647257, -0.020126633, -0.17405704, -0.26438174) * go_3(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.11210597, -0.020617625, -0.13101855, -0.17561626, -0.043740314, 0.23093803, -0.016813299, 0.09149021, 0.18216842, -0.043552347, 0.023779068, -0.10780718, -0.016673947, 0.14319964, -0.028260237, -0.124928825) * go_3(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.03160608, -0.2333736, -0.13623776, -0.026613101, -0.26093182, 0.0132271405, 0.13844319, -0.02270748, 0.10522583, 0.18912983, 0.073725015, -0.27355325, -0.0055876593, 0.16790742, -0.07568777, 0.06618935) * go_3(pixel.xy, 1, 0);
  result += mat4x4<f32>(0.022589413, 0.07764155, 0.07209622, -0.056753542, 0.0568345, -0.16099633, -0.1312878, 0.02636607, -0.21696982, -0.059245802, -0.08554336, 0.14966543, -0.059751473, -0.12615988, -0.04726769, 0.05051841) * go_3(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.08186889, 0.08205334, 0.023400525, -0.014372715, -0.32853618, 0.20950803, -0.13900198, 0.033662543, 0.22546336, 0.51378864, 0.25709614, 0.0690995, 0.024139842, 0.06293423, -0.016842663, -0.0019389848) * go_4(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.08322223, 0.20575687, -0.12917835, -0.051425036, -0.10029536, 0.020689568, -0.62112635, -0.15488598, -0.12642258, 0.27025947, -0.10352515, -0.094899215, -0.07861278, -0.008126564, -0.36391425, 0.012501281) * go_4(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.09727261, 0.2485468, 0.032302193, -0.056679122, -0.30999616, -0.15299593, -0.023860209, -0.016379328, 0.20444955, 0.24193929, -0.047571138, -0.13646403, 0.07320446, 0.11940953, 0.081255615, -0.024622988) * go_4(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.012735532, -0.0026588705, 0.049573418, -0.03732182, -0.550759, -0.19040847, -0.092085555, 0.050688766, 0.05871898, 0.65302145, 0.0486849, -0.015391376, -0.088805616, -0.1919315, -0.18541074, 0.064208336) * go_4(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.25550497, 0.076505475, -0.0033188355, 0.05434708, -0.6988797, -0.44051754, -0.7110294, -0.6219069, -0.18371364, 0.03994295, 0.22495036, 0.2654511, 0.039869636, -0.0014285883, -0.3385523, 0.03384559) * go_4(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.12577426, 0.18141976, 0.017276304, -0.030196752, -0.3411355, -0.051372755, -0.4402098, -0.2307844, 0.2475909, 0.042480852, -0.13148455, 0.08761176, 0.09051365, 0.04634071, -0.1398518, -0.09816492) * go_4(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.082957186, 0.20064567, -0.0039741206, -0.101500906, -0.11700493, 0.029862897, -0.12905416, 0.2396674, -0.0837802, 0.53440446, -0.044294536, -0.03571166, 0.043897923, -0.052617326, -0.15071645, 0.032061413) * go_4(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.11662253, 0.11108744, 0.15453078, 0.07819891, -0.25460127, -0.8427337, -0.07924075, 0.060776, -0.07543319, 0.1565062, -0.12689075, -0.053272385, -0.19933213, -0.020827955, 0.013956402, 0.21194445) * go_4(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.0043281335, -0.024467073, 0.051124696, 0.08090264, -0.30834627, -0.67489, 0.2619303, 0.23885296, 0.20223773, 0.23991251, 0.01228539, -0.077657975, 0.025452869, -0.03739561, 0.042129666, 0.11460913) * go_4(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.06228207, -0.14803374, 0.010911389, 0.09355621, 0.023043629, 0.031996407, -0.055188306, -0.014802153, -0.019913547, 0.049278714, -0.08680487, -0.109947994, 0.0075249076, 0.05728937, -0.23096122, -0.14276639) * go_5(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.13976647, -0.06370508, -0.103730015, 0.036839988, -0.034798823, 0.10165849, -0.22992481, -0.22844586, -0.09660402, -0.00035895672, 0.043261856, -0.048690017, 0.07580462, -0.076795, 0.104297355, 0.064719155) * go_5(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.20086232, 0.21900544, 0.100586765, -0.1263965, 0.08518987, 0.07015036, 0.1540687, -0.027686164, -0.2645977, -0.21961495, -0.049981266, 0.04538352, 0.07476041, 0.015029907, -0.0283461, -0.06752002) * go_5(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.025824754, 0.009975207, -0.09909158, -0.007285313, 0.018532153, -0.17034489, -0.22879048, 0.11958223, -0.02237275, -0.039665785, 0.10340932, -0.035260696, -0.044261284, -0.08655165, -0.106472224, 0.050346926) * go_5(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.088629484, -0.03668536, -0.09841912, -0.026597997, -0.053007387, 0.10285643, -0.21886663, -0.16486467, -0.06485831, -0.16549312, 0.09329481, 0.019519072, 0.125703, 0.04451335, -0.057531886, 0.016026434) * go_5(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.1822173, -0.050538287, 0.13174933, 0.12418439, 0.089775965, 0.20749187, -0.027725866, -0.19011584, -0.08552012, 0.0063636974, -0.09168926, -0.30534875, 0.06661879, -0.06904948, -0.030606193, 0.11095211) * go_5(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.105299786, -0.35318968, -0.09098853, -0.0369341, 0.0002527501, -0.0522018, -0.09358501, -0.045713484, 0.0027285013, 0.048836533, 0.13147967, -0.048738208, 0.059378657, -0.10914055, 0.11926634, 0.075568035) * go_5(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.2516043, -0.24786504, -0.10248864, -0.0040028943, 0.02035929, 0.21344659, -0.18807223, -0.15342413, 0.10871073, 0.084864154, 0.1361142, 0.0115587525, 0.11032122, -0.12804365, -0.11517307, 0.029220797) * go_5(pixel.xy, 1, 0);
  result += mat4x4<f32>(0.0013311467, 0.031627458, -0.07854846, -0.057380144, -0.058437843, -0.034605294, 0.088147335, 0.03749221, 0.018598026, 0.017132863, 0.0018768669, -0.04457343, 0.03682849, -0.055201598, -0.0021610786, -0.08538003) * go_5(pixel.xy, 1, 1);
  result += vec4f(0.12639354, -0.013081255, 0.0065587023, 0.046620134);
  textureStore(conv2d_2_tf_tex, pixel.xy, result);
}
