// Layer: Anime4K-v4.1-Restore-GAN-(UUL)-Conv-4x3x3x24
// Name: conv2d4tf1
// Inputs: ['conv2d_3_tf', 'conv2d_3_tf1', 'conv2d_3_tf2']
// Output: conv2d_4_tf1
@group(0) @binding(0) var conv2d_3_tf_tex: texture_2d<f32>;
@group(0) @binding(1) var conv2d_3_tf1_tex: texture_2d<f32>;
@group(0) @binding(2) var conv2d_3_tf2_tex: texture_2d<f32>;
@group(0) @binding(3) var conv2d_4_tf1_tex: texture_storage_2d<rgba16float, write>;
fn max4(vector: vec4f, value: f32) -> vec4f {
  return max(vector, vec4f(value));
}

fn go_0(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_3_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_1(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_3_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_2(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_3_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_3(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_3_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_4(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_3_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_5(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_3_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}


@compute
@workgroup_size(8, 8)
fn computeMain(@builtin(global_invocation_id) pixel: vec3u) {
  // OOB check
  let dim_out: vec2u = textureDimensions(conv2d_4_tf1_tex);
  if (pixel.x >= dim_out.x || pixel.y >= dim_out.y) {
    return;
  }
  
  var result: vec4f = vec4f(0.0);
  result += mat4x4<f32>(0.09358625, 0.04006633, 0.08724545, 0.08691784, -0.14107502, -0.0007997976, 0.17306888, 0.038711257, 0.0985122, -0.0014992851, -0.17487743, -0.10194699, 0.11023988, -0.06968423, 0.01662707, 0.21470292) * go_0(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.031636875, 0.13806665, -0.0814631, 0.07943226, 0.0119793005, 0.04941359, 0.074861325, -0.16535385, -0.11496889, 0.13269342, -0.109500505, -0.05149521, -0.046225246, 0.12686665, 0.17126462, 0.009109644) * go_0(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.03334245, -0.123216815, -0.1330235, -0.12154138, -0.059628066, 0.10496938, -0.0038054981, 0.1457567, -0.019918114, -0.0020958772, 0.04247789, -0.0062168534, 0.0026362725, 0.021436866, -0.11040905, 0.108333305) * go_0(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.0042455117, -0.14640199, -0.06118977, 0.16638735, -0.030705301, -0.0113191, 0.03248879, -0.044538334, -0.0102377115, -0.01707356, -0.13409424, 0.07820454, 0.0050400933, -0.051095866, 0.115574144, 0.1082736) * go_0(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.059850972, 0.12553261, 0.23358655, 0.011808153, 0.3940932, -0.10867016, -0.23658483, -0.08347661, 0.18414836, 0.13377388, -0.14889582, -0.0067077233, 0.04137153, 0.07864369, -0.2230585, 0.20400442) * go_0(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.14122446, -0.05491896, 0.23194087, -0.04420126, 0.003479982, -0.0025467714, 0.07257286, 0.064608194, 0.003435564, 0.028599951, 0.034278907, 0.020127177, -0.05769672, -0.053810723, 0.021130094, -0.10632285) * go_0(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.06342671, -0.02102852, -0.057624057, -0.04255905, -0.027436286, -0.004304728, -0.068475425, 0.084754616, -0.013654013, 0.040915813, 0.03803916, -0.013154927, 0.035633024, 0.03539127, 0.011308919, -0.07959703) * go_0(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.082511365, -0.062265713, 0.12336093, 0.050000474, -0.012206841, -0.11110678, 0.23245499, 0.08442603, 0.03861097, 0.04962608, 0.2711461, 0.061978027, 0.02267645, -0.024108166, 0.050957117, -0.09069499) * go_0(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.036008272, 0.077173404, 0.007906516, -0.07967038, -0.03769282, 0.0647222, -0.048025336, -0.24466506, -0.10772676, -0.045048002, 0.11905392, 0.09015004, 0.018585265, 0.0492868, -0.12064848, -0.12835266) * go_0(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.03722991, 0.05483932, 0.005279874, -0.036382344, 0.07366523, 0.080671124, -0.022853829, 0.17026854, -0.025622483, 0.02234575, 0.047529936, 0.08349223, -0.0811592, -0.06856246, 0.095451735, 0.04447287) * go_1(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.011579923, -0.07021126, -0.18775284, 0.06256736, -0.07229184, 0.007508845, 0.009623485, -0.07026442, -0.017683864, -0.05394156, 0.009937637, -0.06132005, 0.08447428, -0.035887707, 0.05672016, -0.023255082) * go_1(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.24283841, 0.049064692, 0.19258617, -0.09556112, -0.043943178, -0.026093625, -0.0037277476, -0.08488672, -0.05969904, 0.014202227, 0.07155138, -0.006620953, 0.12378093, 0.023470948, -0.15103869, 0.04221627) * go_1(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.0008730981, -0.07160066, -0.076891124, 0.13791084, -0.13737433, -0.010282979, 0.078346394, 0.09242266, 0.076963596, 0.05978104, -0.05467655, 0.086442284, 0.044609588, -0.016739035, 0.021820836, -0.2011709) * go_1(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.20905402, -0.08102045, -0.29869592, -0.047263417, -0.17030494, 0.13713762, 0.1867857, 0.0476295, -0.09349327, 0.19339523, 0.022656808, -0.0009851357, -0.2303008, -0.06444237, -0.019168362, 0.2020858) * go_1(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.024434976, 0.10944717, 0.055678647, 0.10161796, -0.049396966, 0.0052144537, -0.16087285, -0.015105596, -0.086011946, 0.022698695, 0.15757102, -0.14491843, 0.037698947, -0.047221012, -0.030243723, 0.13107443) * go_1(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.086016916, 0.04024993, 0.04098034, 0.07725262, -0.06640869, -0.04112078, 0.021855356, -0.18622814, -0.058279853, -0.029800907, -0.15918955, 0.09680758, 0.054697946, 0.03253648, 0.08338082, -0.04502999) * go_1(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.01646839, -0.054888945, -0.26849058, -0.011435841, -0.057793204, -0.07927816, 0.025392462, -0.10175547, 0.029483873, -0.14580205, 0.0024861468, 0.07208289, 0.06519596, 0.03442096, 0.026397267, 0.020078517) * go_1(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.08198775, -0.0814655, 0.05315498, 0.051077936, -0.030619444, 0.019064562, -0.13288063, -0.1472509, -0.048526105, -0.040171668, 0.12455891, -0.14622177, 0.011852844, 0.096620746, -0.18692164, -0.055299122) * go_1(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.058797743, 0.024229972, 0.034255873, 0.036447, 0.00075901265, 0.074688934, -0.042593017, 0.00060293835, 0.032229654, -0.052531853, -0.07462269, 0.12802848, 0.007995166, -0.02878037, 0.06900506, 0.06908949) * go_2(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.10522075, 0.048956644, 0.05420077, -0.016637634, 0.04412326, -0.09468539, 0.034226764, -0.018262677, -0.06783241, -0.040329143, 0.18946178, 0.13130969, 0.10075684, -0.07591921, -0.1623158, -0.025584042) * go_2(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.034107495, -0.016770529, -0.016136456, 0.02585942, 0.12677853, 0.01417575, 0.047958545, 0.12998682, 0.016893117, 0.010598557, 0.12055522, -0.047758352, -0.05235784, 0.005084147, 0.07550005, -0.16640854) * go_2(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.114226855, 0.06335544, -0.0881748, -0.2498259, 0.015568782, 0.012487128, 0.0046955296, 0.025751248, 0.04212843, 0.15120652, 0.15968561, 0.19253394, 0.087034084, -0.0423726, -0.051838346, -0.14310384) * go_2(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.013026084, 0.06131241, -0.1675201, -0.12888479, -0.0014964524, -0.10069896, 0.02356384, 0.01806289, 0.19572161, -0.11961045, -0.24700944, -0.1844911, -0.26364744, 0.07644966, 0.2593859, 0.08114606) * go_2(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.068388715, -0.0046663, -0.020979358, 0.09952774, -0.11110095, -0.0774004, 0.012848098, -0.012930355, 0.08189461, 0.0054886085, 0.00053461257, -0.23077695, 0.050515562, -0.035863694, 0.07036627, -0.13812068) * go_2(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.09648746, -0.10755913, -0.08146234, 0.00811376, 0.004864761, -0.08113828, 0.04964263, 0.11690557, -0.014368101, -0.014423742, 0.03171528, 0.08982036, 0.10246555, -0.06881209, -0.29283836, 0.039537873) * go_2(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.13718893, -0.009659399, 0.2992416, -0.0066323625, -0.071996465, 0.13524258, 0.023679543, 0.07826935, 0.075409144, 0.08589669, 0.061272033, -0.045499824, -0.03741875, 0.27842635, 0.13185109, -0.099911585) * go_2(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.024441944, -0.03522318, 0.05140529, 0.0071282475, -0.10594544, -0.05181565, 0.25732583, -0.018825782, -0.0012439055, 0.019219896, 0.09946713, -0.0722263, -0.12645322, -9.644992e-05, 0.06875323, 0.21561073) * go_2(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.022150004, 0.054419033, -0.083107114, -0.08959484, 0.08172815, -0.013834652, -0.15180096, -0.024615027, -0.07028262, -0.0007512729, 0.26976782, 0.18875809, -0.099938266, 0.05480333, 0.016040394, -0.17822164) * go_3(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.026931163, -0.052416157, 0.07639568, -0.05452748, 0.035625458, 0.004550296, -0.16772425, -0.00061168516, 0.15335664, 0.051302932, 0.04580133, 0.13039467, 0.023763021, -0.07687596, -0.05549799, -0.017360365) * go_3(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.003008481, 0.10352107, 0.076348424, 0.040963676, -0.057719737, -0.08755317, 0.024834383, -0.23462833, -0.09101583, 0.086903796, -0.07216142, 0.090624414, 0.029025761, -0.033761367, 0.1366635, -0.10524101) * go_3(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.028344428, 0.22866614, 0.22265156, -0.050915148, -0.07759447, -0.1586285, -0.049925447, -0.05273905, -0.010746756, 0.019270241, 0.22497585, 0.013571467, 0.019270418, 0.052651558, -0.024736265, -0.14067775) * go_3(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.058332205, -0.0631195, -0.19648206, -0.039481703, -0.2998922, 0.18085144, 0.17090257, 0.27006564, -0.2703318, 0.06099154, 0.04560162, 0.118134916, -0.004565211, -0.08472733, 0.10459307, -0.16570608) * go_3(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.10358238, -0.061059173, -0.13393302, 0.015948834, -0.030868502, -0.04978585, -0.012687447, -0.2505655, 0.049323123, -0.00019374766, 0.028754372, 0.033648107, 0.07063697, -0.014583936, 0.1362805, 0.08024834) * go_3(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.013942856, -0.08531508, 0.039745845, 0.10414194, 0.06313496, 0.02417523, 0.07144888, -0.13780569, 0.0024822098, -0.0005785404, -0.070522025, -0.010603217, -0.008350787, -0.08310923, -0.06434052, 0.05212829) * go_3(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.033343147, 0.11818227, -0.101355605, -0.09815853, -0.0037257646, 0.093914956, 0.045073465, -0.21146262, -0.033502303, -0.033563633, -0.19179441, -0.064311236, 0.017742243, 0.008572989, -0.017310511, 0.09787876) * go_3(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.0965179, -0.05104779, 0.21980357, 0.059457585, 0.05362383, -0.07189908, 0.21294238, 0.12593827, 0.08622481, 0.0061037396, -0.11099128, -0.075461335, -0.019220999, -0.08473234, 0.1896788, 0.1545825) * go_3(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.067072935, -0.009035596, 0.039182313, 0.017011479, 0.036997713, -0.042869426, -0.0040173815, -0.031988475, -0.0069290483, 0.05294254, -0.0012220141, 0.09110227, -0.014827876, 0.19689846, 0.0022661786, -0.07005972) * go_4(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.057713088, 0.050435945, -8.427375e-05, -0.010549373, 0.03760227, 0.022647688, 0.02825286, 0.06377033, -0.0047159446, 0.11320346, -0.069414824, 0.059531983, -0.3299612, 0.2719073, -0.1501237, -0.2640464) * go_4(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.11150839, 0.050114244, -0.032236893, 0.0015038166, 0.027094943, -0.02502733, -0.043179303, 0.016036531, 0.09573851, 0.08618344, -0.107915044, 0.009664713, 0.014394529, 0.06955564, 0.16166097, 0.20743166) * go_4(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.044392925, -0.040684875, -0.23557815, -0.056034833, -0.028161626, 0.05496662, -0.053270698, -0.0734554, -0.111465365, 0.03420695, 0.109617576, 0.0010966054, -0.2844835, 0.26836982, 0.23121232, -0.10785496) * go_4(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.23357789, 0.00012668641, 0.107617445, 0.095301114, -0.02025481, 0.05065449, -0.024430674, -0.06981479, -0.013470061, -0.18655962, 0.0027839232, -0.12599237, 0.33548972, 0.30407274, -0.40126064, -0.32490435) * go_4(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.122281134, -0.04318224, -0.052405555, 0.013284251, 0.13037762, -0.03950817, 0.11751856, 0.12586644, 0.04493563, 0.065146565, -0.08837088, 0.047829423, -0.06804128, 0.048373412, -0.15102965, 0.055268798) * go_4(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.030756064, 0.04952702, -0.13558283, 0.0072438875, 0.009556099, -0.010242232, -0.030279964, -0.02526838, 0.038414564, 0.048353594, 0.095979914, 0.021043506, -0.03390589, 0.21514107, 0.16822831, -0.03800557) * go_4(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.077866204, -0.033634454, 0.037902627, 0.07902395, -0.028916273, -0.0226067, -0.024876777, -0.022323275, 0.023246247, 0.053687774, -0.07160366, 0.047302466, -0.16095349, 0.20279877, 0.4096563, -0.07618548) * go_4(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.07142796, 0.06627731, -0.14174895, -0.07026203, 0.07220904, -0.040048495, -0.00987828, 0.08977276, 0.13406783, 0.01384705, -0.11771938, 0.12959056, 0.014253595, -0.06292875, 0.2582175, 0.40633658) * go_4(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.16788402, 0.050656084, 0.19867243, -0.047497474, -0.041200183, -0.035055846, 0.07874877, 0.04519112, -0.06284356, 0.066545784, 0.12576821, -0.056989186, -0.017403305, 0.08785861, -0.041629825, -0.015809631) * go_5(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.049183913, 0.0074359034, -0.08632813, 0.005517822, 0.022378573, 0.008625282, -0.08956046, -0.022195501, 0.05653246, 0.059899297, -0.18981466, -0.088493966, -0.17928217, 0.09689291, 0.119702354, 0.02164232) * go_5(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.14917888, 0.015048009, -0.005661549, 0.037006833, -0.044544507, -0.04312164, -0.00308949, -0.1262605, -0.05497811, 0.007944446, 0.08427898, 0.10117571, -0.04657141, 0.02150161, -0.06573186, 0.040465128) * go_5(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.13925308, -0.027741015, 0.154933, -0.21173707, 0.03086154, -0.09298073, 0.012140707, -0.0837475, -0.0389594, -0.13471437, -0.06527673, -0.09669443, -0.029916963, 0.098984316, 0.07964568, 0.12955827) * go_5(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.113585204, -0.1900433, 0.06495972, 0.2520296, 0.028009154, 0.11481251, -0.041522022, 0.12091007, 0.10473571, 0.050006554, 0.15297762, -0.008781097, 0.31699565, -0.017735595, -0.17169666, -0.2624132) * go_5(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.0887785, 0.028235141, 0.07372089, 0.04354993, 0.017250411, 0.06372916, 0.14129215, 0.02355555, 0.027448706, 0.044665307, 0.021888286, 0.19552916, 0.15212306, 0.04121492, 0.14111567, 0.17364514) * go_5(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.053401828, 0.0036638333, -0.11299562, -0.018262852, -0.018146416, 0.036637712, -0.016478777, -0.1337408, -0.0517515, -0.04804134, 0.023531632, -0.043174334, -0.06509281, 0.04609587, 0.12353532, 0.07258964) * go_5(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.13987146, -0.004954282, -0.19968997, 0.10498915, 0.032130655, -0.06047886, 0.05529797, 0.1026575, 0.05790419, -0.02940328, -0.0059209364, 0.014009479, 0.03707385, -0.22969075, 0.014512211, -0.05710503) * go_5(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.039069746, 0.062022384, -0.07215672, 0.06928623, 0.060027763, -0.0012453326, -0.10970553, -0.06261657, 0.1871706, -0.0018255943, -0.14889055, 0.023299964, -0.3351649, 0.37802795, -0.19070482, -0.060723614) * go_5(pixel.xy, 1, 1);
  result += vec4f(0.11029581, -0.13019782, -0.084883854, -0.08666392);
  textureStore(conv2d_4_tf1_tex, pixel.xy, result);
}
