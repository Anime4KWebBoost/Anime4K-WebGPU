// Layer: Anime4K-v4.1-Restore-GAN-(UUL)-Conv-4x3x3x24
// Name: conv2d2tf1
// Inputs: ['conv2d_1_tf', 'conv2d_1_tf1', 'conv2d_1_tf2']
// Output: conv2d_2_tf1
@group(0) @binding(0) var conv2d_1_tf_tex: texture_2d<f32>;
@group(0) @binding(1) var conv2d_1_tf1_tex: texture_2d<f32>;
@group(0) @binding(2) var conv2d_1_tf2_tex: texture_2d<f32>;
@group(0) @binding(3) var conv2d_2_tf1_tex: texture_storage_2d<rgba16float, write>;
fn max4(vector: vec4f, value: f32) -> vec4f {
  return max(vector, vec4f(value));
}

fn go_0(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_1(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_2(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_1_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_3(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_4(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf1_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}

fn go_5(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_1_tf2_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}


@compute
@workgroup_size(8, 8)
fn computeMain(@builtin(global_invocation_id) pixel: vec3u) {
  // OOB check
  let dim_out: vec2u = textureDimensions(conv2d_2_tf1_tex);
  if (pixel.x >= dim_out.x || pixel.y >= dim_out.y) {
    return;
  }
  
  var result: vec4f = vec4f(0.0);
  result += mat4x4<f32>(-0.011583964, -0.039870065, -0.15999149, 0.08675985, 0.08109101, -0.1879774, 0.19331096, -0.4534524, -0.12586977, 0.011471076, 0.19720814, -0.1143906, 0.07553728, -0.056127805, 0.1635918, -0.17931661) * go_0(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.067819625, -0.21503527, 0.09939146, -0.07270988, -0.059113953, -0.049392458, 0.28810808, -0.14547947, -0.12949272, -0.0024433902, 0.38158932, -0.07837205, -0.036141198, 0.15529773, -0.11398279, -0.13650618) * go_0(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.033942446, -0.031523492, 0.088098265, -0.20998281, -8.739418e-06, 0.176242, -0.0481297, 0.052109815, 0.081447944, -0.14213382, 0.277246, -0.11737086, -0.13384427, -0.0008667019, 0.14954486, 0.12667161) * go_0(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.19201736, 0.12778927, -0.038250033, -0.5468646, -0.0061836247, 0.18480751, 0.044333503, 0.26007488, -0.20757933, 0.19695, -0.29442382, -0.22411272, 0.004405764, -0.034501124, 0.057751704, -0.03413746) * go_0(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.24880652, 0.1541801, -0.012062207, -0.6005811, -0.14904043, 0.05525859, -0.10741317, 0.1890063, -0.035635296, 0.3005301, -0.2797406, 0.8594579, 0.07482009, -0.10378448, 0.08236929, -0.26407042) * go_0(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.0073660286, -0.26556304, -0.1433165, 0.25972745, 0.23314878, 0.027763477, -0.11621574, -0.21574795, 0.24350981, -0.006988954, -0.02177087, -0.13037811, -0.1166682, 0.17278492, 0.08241569, 0.51040107) * go_0(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.13853693, -0.06968601, 0.12298946, 0.017782336, 0.012372836, 0.027876694, -0.27880472, -0.18076333, -0.0397836, 0.2420896, 0.038473837, -0.1555481, 0.04083059, -0.073141545, 0.14184499, 0.30984175) * go_0(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.3133015, -0.09274826, 0.13639203, 0.10206795, -0.08598331, 0.03450585, 0.19280651, -0.08538865, -0.008546558, -0.07174769, -0.20052853, -0.24860515, -0.1470964, -0.22390126, 0.07744998, -0.002739885) * go_0(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.006748567, 0.07274748, 0.092211284, 0.14483126, -0.11027929, 0.1201977, -0.04872484, -0.16433857, 0.044397447, -0.21384367, 0.03269424, 0.10942982, 0.04403927, 0.010967787, -0.040405788, -0.03232669) * go_0(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.008280273, 0.024787866, 0.037189875, 0.03429621, -0.14698292, 0.094748855, 0.11563344, -0.073624834, -0.029853089, 0.07087531, -0.05736988, 0.11237037, -0.04985742, 0.056539766, -0.020783758, 0.12329614) * go_1(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.03344095, -0.0073405057, 0.05190122, 0.12998703, -0.048184916, -0.13144512, 0.031402104, 0.43577522, 0.112474926, -0.08905257, 0.10081381, -0.014079196, 0.09510892, -0.03853581, -0.20324658, 0.1589196) * go_1(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.034226835, -0.038741812, -0.020816153, -0.13061026, -0.020475632, -0.16419771, -0.0076826485, -0.04103266, -0.0056703947, 0.06705962, 0.026199229, -0.019306373, -0.0067688744, -0.07038936, -0.104216576, 0.12684165) * go_1(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.008213376, -0.10455055, 0.04212865, 0.05025464, -0.07784179, 0.018042147, -0.023232944, 0.25375158, -0.009442334, -0.07854094, -0.040824052, 0.09969908, -0.07734574, 0.010816756, -0.098997355, 0.22808696) * go_1(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.09186444, -0.070967846, -0.18332118, -0.13047308, 0.07874793, 0.49928188, -0.19095366, -0.5786626, -0.076766655, 0.00328989, -0.027825667, -0.46311954, 0.18953162, 0.0067680115, -0.39336485, 0.21162145) * go_1(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.067058854, 0.097902276, 0.11048054, 0.08798107, 0.24173008, -0.09251265, 0.040146023, 0.051595293, -0.024550369, -0.054440435, 0.002777188, 0.10740609, 0.12708955, -0.1126051, 0.08698823, -0.22985286) * go_1(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.009401559, -0.00019733842, -0.0391449, 0.07650643, 0.117760375, -0.16319785, -0.042495195, -0.23318908, 0.024536118, 0.12618859, -0.011912352, 0.09087688, -0.2767169, -0.044689544, 0.18786801, -0.020456426) * go_1(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.034666687, -0.037431296, -0.12936176, -0.20454895, -0.30241257, -0.019945377, 0.01616507, 0.13762684, 0.055600353, -0.01146059, -0.013451368, 0.16529311, 0.42141652, 0.17878959, -0.322346, -0.2869838) * go_1(pixel.xy, 1, 0);
  result += mat4x4<f32>(0.00015858973, -0.026061518, 0.056444857, 0.0891557, 0.08452023, -0.118858494, 0.052117698, 0.10851732, -0.0738216, -0.021903642, 0.041175738, -0.0327392, 0.5465747, -0.22983976, -0.2643581, -0.41978332) * go_1(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.071339466, 0.20363729, -0.12277878, -0.18987495, -0.076909326, 0.040142104, 0.19751047, 0.09099594, 0.05504884, 0.010637861, -0.07010218, 0.016844785, -0.0025642936, -0.07132042, -0.0058730873, 0.114345245) * go_2(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.12181514, 0.09113612, -0.011027632, 0.1210622, -0.11706013, 0.03866967, -0.3818603, 0.071857385, 0.10714353, 0.05537742, -0.44725725, 0.03664743, 0.13571225, -0.13654736, -0.05921695, -0.023738123) * go_2(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.023582853, 0.09176081, -0.021919282, -0.010129313, 0.031890567, -0.07508517, -0.08540747, 0.05653626, 0.05514676, -0.0798297, 0.18732204, -0.030211389, -0.10890019, -0.0084348805, -0.027744634, 0.08252744) * go_2(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.46878332, 0.26391587, 0.1209319, 0.20555447, -0.14922385, 0.051061515, -0.098676264, -0.79184246, -0.013350073, -0.08962262, 0.13399342, 0.06365851, -0.14557728, -0.06463198, -0.08577713, 0.013490423) * go_2(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.09800499, 0.20487864, 0.04297167, -0.17064336, -0.18083592, 0.07161958, -0.25937584, 0.2956417, -0.06518691, -0.041915365, 0.2427435, -0.27577895, 0.042372942, 0.012740312, 0.1629995, -0.068871476) * go_2(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.09425951, -0.0002062786, 0.23311934, -0.006410014, -0.12866448, 0.007478842, -0.033752777, 0.25421995, -0.083972536, 0.23449679, -0.010915457, 0.028103303, -0.034862384, -0.1672906, -0.018962707, -0.18321303) * go_2(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.07923952, -0.008543305, 0.034679245, -0.11071784, -0.18627429, 0.003675945, 0.0069275787, -0.044213627, -0.006995472, 0.048261233, -0.06831886, 0.08082691, 0.09143829, 0.016518226, -0.05343353, -0.059744157) * go_2(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.068577155, 0.07070798, 0.012206329, 0.060340866, -0.15496197, -0.048976723, 0.1804755, 0.023005864, 0.10723597, -0.11200869, -0.09880576, 0.04989044, 0.022357088, -0.037169944, 0.07880648, 0.072531044) * go_2(pixel.xy, 1, 0);
  result += mat4x4<f32>(0.18387286, 0.03215834, -0.14121926, -0.10857612, -0.052505493, 0.04517108, -0.011841349, 0.004303513, 0.106845826, 0.15006103, 0.08652394, 0.08490524, -0.061379727, 0.08679647, -0.040883318, 0.08898481) * go_2(pixel.xy, 1, 1);
  result += mat4x4<f32>(-0.23395903, 0.14408536, 0.06144857, -0.6685949, 0.031935096, 0.12004766, 0.26079124, -0.029172074, -0.03897466, 0.15112093, -0.07277923, 0.03711819, 0.16760348, 0.0568828, -0.065560065, 0.00956802) * go_3(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.04025016, 0.1942882, 0.3924612, -0.04801865, -0.00043523984, 0.14166853, 0.07607167, 0.08827246, -0.013007562, 0.2740378, 0.17477411, -0.12968275, -0.049680926, -0.050259456, 0.45260057, -0.577762) * go_3(pixel.xy, -1, 0);
  result += mat4x4<f32>(0.14644562, 0.031796087, -0.09817545, 0.20418191, -0.0067933775, 0.056546275, -0.21122308, 0.0013088459, -0.01669626, -0.06921733, -0.036989935, -0.011311058, -0.13346042, 0.058525432, -0.20613761, 0.20606859) * go_3(pixel.xy, -1, 1);
  result += mat4x4<f32>(0.030689783, -0.044584632, -0.1423556, 0.46852973, 0.1544211, 0.09648401, -0.02908366, 0.20236433, -0.209728, 0.14151458, 0.043298278, -0.09896984, -0.010364637, 0.105616786, 0.015112407, 0.1621763) * go_3(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.26286677, -0.18297276, -0.008437637, 0.23164693, -0.17953826, 0.0068245744, 0.3154146, 0.013059944, 0.01976866, 0.23886378, -0.41287166, 0.5972539, -0.096666135, -0.041894518, 0.09390394, 0.21449414) * go_3(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.10464677, 0.13162361, 0.15632801, -0.08477776, 0.019359391, 0.011527983, 0.1291731, -0.23251401, 0.12450163, -0.109221414, -0.15897743, -0.14652708, -0.20315395, -0.14564586, 0.020215273, -0.32138833) * go_3(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.0016461449, -0.019713728, 0.0021448475, 0.23474461, -0.023654517, 0.3125121, -0.14093982, 0.029511975, -0.06882552, -0.055134527, 0.08678149, 0.16168617, 0.056411985, -0.003294866, -0.086585745, -0.08039331) * go_3(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.025475128, -0.13736734, -0.23040788, -0.14943235, 0.105925016, 0.035434112, -0.3531705, -0.08996714, 0.16017611, 0.32583725, -0.0015653507, -0.20779954, 0.052627537, 0.15831038, -0.04017022, 0.17487001) * go_3(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.02480846, -0.007830464, -0.0036758396, -0.23093869, 0.09558813, -0.114281885, 0.031678613, -0.009195237, 0.06701917, 0.22061102, -0.09497275, -0.049442247, 0.035844408, -0.0007537016, 0.022630664, -0.038742796) * go_3(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.041537244, -0.07261114, -0.04763458, 0.10301855, 0.17563294, -0.0015564843, -0.37491855, 0.98893, -0.033186004, 0.02857216, 0.08441547, -0.10630457, -0.0057512764, -0.072272584, 0.04433026, -0.03993334) * go_4(pixel.xy, -1, -1);
  result += mat4x4<f32>(0.045594532, -0.09183751, -0.07595133, -0.29140073, 0.14685835, -0.11706308, -0.1521791, -0.08122252, -0.16447383, -0.16774787, 0.031189548, -0.049414303, 0.11017621, -0.039800264, -0.026208388, 0.010578009) * go_4(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.008146379, 0.011186087, 0.06602373, 0.12634839, -0.15983777, 0.47099414, -0.45333612, 0.8108099, 0.060124353, -0.055181783, 0.060738478, -0.19588436, -0.058250163, 0.07546748, -0.12299866, 0.14861311) * go_4(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.061107293, 0.03472494, -0.02506493, -0.20965452, 0.06124681, -0.10108107, -0.016206535, 0.9110013, -0.1416294, 0.08154053, -0.031441186, 0.0186752, 0.0034352038, -0.07802204, 0.017881326, 0.08767849) * go_4(pixel.xy, 0, -1);
  result += mat4x4<f32>(0.111084074, 0.15226965, 0.18580344, 0.2079405, -0.13621394, -1.091612, 0.61654764, -0.4794665, 0.06974509, -0.13632853, 0.075810306, 0.23651427, -0.13307844, -0.15254645, 0.3380616, -0.23381148) * go_4(pixel.xy, 0, 0);
  result += mat4x4<f32>(-0.087361775, -0.18112153, -0.041845977, 0.06846624, -0.5374386, 0.0951175, -0.07031933, 0.6016942, 0.2098498, 0.14762096, -0.07894201, 0.018698592, 0.015885107, 0.08625943, -0.06305365, -0.09532374) * go_4(pixel.xy, 0, 1);
  result += mat4x4<f32>(-0.00532194, 0.023428405, 0.009051187, -0.026698198, 0.24106956, -0.120294146, -0.17878368, 0.5585901, -0.09603226, -0.27434218, 0.061267257, -0.067599274, 0.11577519, -0.07198036, -0.063585244, -0.054138158) * go_4(pixel.xy, 1, -1);
  result += mat4x4<f32>(-0.0037090166, 0.12307526, 0.0906306, 0.25897357, -0.056975186, -0.1644774, 0.29305506, 0.8245228, -0.1015189, 0.12243611, -0.04579446, 0.03619774, -0.13700119, -0.093857154, 0.11116371, 0.28709015) * go_4(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.06580517, -0.0050515556, -0.020180127, -0.12627304, -0.5295511, 0.20198601, 0.07984717, 0.49923962, 0.053387187, -0.14329363, 0.0334398, 0.027427796, -0.06010418, 0.06905177, -0.05953624, -0.0062744734) * go_4(pixel.xy, 1, 1);
  result += mat4x4<f32>(0.10157902, -0.04258438, -0.081592366, 0.10231988, -0.0011280937, -0.0029477119, 0.122473806, 0.058182172, -0.12809396, -0.0764063, -0.02463603, 0.090703174, 0.016098853, -0.05153951, -0.10675215, -0.02805221) * go_5(pixel.xy, -1, -1);
  result += mat4x4<f32>(-0.006401907, 0.03299347, 0.021813435, -0.13645992, 0.023382979, 0.010197056, 0.06242549, 0.12870488, 0.019453553, -0.2611006, 0.36471257, -0.15937614, -0.15930663, 0.05387499, 0.016597098, -0.08595697) * go_5(pixel.xy, -1, 0);
  result += mat4x4<f32>(-0.124307014, 0.12072375, -0.0152935125, 0.11888215, -0.002845999, 0.06499965, -0.06901064, -0.03703204, -0.029126361, -0.0076392456, -0.060736757, 0.129555, 0.11537912, 0.116019435, 0.010435708, -0.028468154) * go_5(pixel.xy, -1, 1);
  result += mat4x4<f32>(-0.30459714, -0.17632067, -0.011205797, -0.221887, 0.10605666, -0.13572265, -0.46315852, 0.04301515, -0.13903672, 0.06458765, 0.06137365, -0.07876008, 0.094751015, -0.14028335, 0.116963856, -0.08032087) * go_5(pixel.xy, 0, -1);
  result += mat4x4<f32>(-0.06367799, 0.02582219, 0.014640189, 0.18990557, -0.06407629, -0.32271802, 0.1840523, -0.19602421, 0.3909874, -0.36456084, 0.18965109, 0.7528314, 0.012954545, -0.15343507, -0.22583503, 0.25706828) * go_5(pixel.xy, 0, 0);
  result += mat4x4<f32>(0.1301731, 0.058515985, 0.033280328, -0.24190922, -0.040143438, 0.058877766, 0.0054545617, 0.087361515, 0.27292597, -0.40958795, 0.026887156, -0.31366885, -0.0043431865, 0.12750955, -0.07194776, 0.065983064) * go_5(pixel.xy, 0, 1);
  result += mat4x4<f32>(0.035723373, -0.095498726, 0.0782959, 0.15071936, -0.023301449, -0.05924046, 0.06547244, -0.10660772, -0.030093014, 0.07851236, -0.011449212, 0.047922783, -0.015065303, 0.03087975, -0.00836779, 0.09950588) * go_5(pixel.xy, 1, -1);
  result += mat4x4<f32>(0.14543498, -0.117947996, -0.03933479, 0.004552818, -0.13139006, -0.122988954, -0.22851296, -0.13614058, -0.065790504, 0.18083169, 0.009247789, 0.11099354, -0.09211226, -0.16174947, -0.030774815, -0.087108776) * go_5(pixel.xy, 1, 0);
  result += mat4x4<f32>(-0.03276944, 0.066936366, -0.0058282167, 0.036148816, -0.112155296, 0.00018165805, 0.1121539, 0.19087985, 0.19124067, -0.17718928, -0.218951, -0.27710462, 0.055448502, -0.14703886, -0.02985939, -0.13152236) * go_5(pixel.xy, 1, 1);
  result += vec4f(0.023773972, -0.01610134, -0.0063477294, 0.03926911);
  textureStore(conv2d_2_tf1_tex, pixel.xy, result);
}
